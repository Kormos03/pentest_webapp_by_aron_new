import { useState } from "react";

export const CopyToClipboardButton = ({ toCopy }: any) => {
  const [tooltipVisible, setTooltipVisible] = useState(false);
  const [copySymbolPosition, setCopySymbolPosition] = useState({ x: 0, y: 0 });

  const handleCopy = () => {
    navigator.clipboard.writeText(toCopy).then(() => {
      setCopySymbolPosition({ x: 100 - 50, y: 200 - 150 });
      setTooltipVisible(true);
      setTimeout(() => {
        setTooltipVisible(false);
      }, 1000); // Hide tooltip after 2 seconds
    }).catch(err => {
      console.error('Failed to copy content: ', err);
    });
  };

  return (
    <div className="icon-container">
      <div className="copy-icon" onClick={handleCopy}>
        <div className="clipboard-clip"></div>
        <div className="clipboard-body">
          <img src="copy_icon.png" className="copy-icon-img" alt="Copy" />
        </div>
        <div className="paper-sheet"></div>
      </div>
      {tooltipVisible && (
        <div
          className="tooltip-custom"
          style={{
            position: 'absolute',
            top: copySymbolPosition.y,
            left: copySymbolPosition.x,
          }}
        >
          Copied!
        </div>
      )}
    </div>
  );
}