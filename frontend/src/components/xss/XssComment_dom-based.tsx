import { useState } from 'react';

export function CommentSection() {
  const [comments, setComments] = useState<any[]>([]);
  const [newComment, setNewComment] = useState('');

  const handleInputChange = (e :any) => {
    setNewComment(e.target.value);
  };

  const handleAddComment = () => {
    setComments([...comments, newComment]);
    setNewComment('');
  };

  const createMarkup = (comment : any) => {
    return { __html: comment };
  };

  return (
    <div className="interactive-container">
      <h2>Comment Section</h2>
      <textarea
        value={newComment}
        onChange={handleInputChange}
        placeholder="This section demonstrates the DOM based xss, try something like <img src='invalid-image' onerror='alert('XSS Attack!');' /> (with double quotes instead of single quotes) "
      />
      <br />
      <button onClick={handleAddComment}>Add Comment</button>
      <h3>Comments</h3>
      <div className="comments-list">
        {comments.map((comment, index) => (
          <div key={index} className="comment-item">
            {/* Displaying comment using dangerouslySetInnerHTML */}
            <div dangerouslySetInnerHTML={createMarkup(comment)} />
          </div>
        ))}
      </div>
    </div>
  );
};

export default CommentSection;