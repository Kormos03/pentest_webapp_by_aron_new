import { useEffect, useState } from "react";
import { GLOBAL_API_URL } from "../../GLOBAl_API";
import { Post } from "../../assets/PostModel";
import { PostList } from "./Show_Posts";

const API_URL = GLOBAL_API_URL + "posts/";

export function XssPost(){
    const [getPosts, setPosts] = useState([] as Post[]);
    const [getWritePost, setWritePost] = useState("");

    useEffect(() => {
        async function fetchThePosts() {
            const request = await fetch(API_URL, {
                method: 'GET',
                headers: {
                    'Content-type': 'application/json',
                    'Accept': 'application/json'
                }
            });
            if(!request.ok){
                console.log("something went wrong when tried to fetch posts!")
            }
            const response = await request.json();
            setPosts(await response)
        }
        fetchThePosts();
    }, []);

    return <>
    <div className="interactive-container">
     <PostList posts={getPosts} />
     </div>
    </>
}